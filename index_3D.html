<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<title>De tu cabeza a tus pies</title>
	<script src="js/jquery.js" type="text/javascript"></script>
	<script src="js/three.js" type="text/javascript"></script>
	<script src="js/Projector.js" type="text/javascript"></script>
	<script src="js/CanvasRenderer.js" type="text/javascript"></script>
	<script src="js/stats.js" type="text/javascript"></script>
	<script>
$(function(){

var scene, camera, renderer, loader, mesh, material, plano;
var group;
 
init();
render();
 
function init() {
 
    scene = new THREE.Scene();
 
    camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 5000 );
    camera.position.z = 14;
    camera.position.y = 10;
 
    //set background to have transparency - alpha: true
    renderer = new THREE.WebGLRenderer({ alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
 
    document.getElementById("plot").appendChild(renderer.domElement);
    
    
    var planoGeometria = new THREE.PlaneGeometry(6,2);
    var planoMaterial = new THREE.MeshLambertMaterial({
        color: 0xffffff
    });
    plano = new THREE.Mesh(planoGeometria, planoMaterial);
    scene.add(plano);
 	
 
    var loader = new THREE.JSONLoader();
    loader.load('objetos/zapato1.json', modelLoadedCallback);
    var gridXZ = new THREE.GridHelper(100, 10);
    gridXZ.setColors( new THREE.Color(0xFFC0CB), new THREE.Color(0x8f8f8f) );
    gridXZ.position.set(0,0,0 );
    scene.add(gridXZ);
    

}
 
function modelLoadedCallback(geometry) {

    var textura = new THREE.ImageUtils.loadTexture('img/muro.jpg');
    textura.minFilter = THREE.NearestFilter;
    

    for ( var i = 0; i < geometry.faces.length; i ++ ) {
        geometry.faces[ i ].color.setHex( Math.random() * 0xffffff );
    }


    var material = new THREE.MeshLambertMaterial( { 
        map: textura
    } );
 
    mesh = new THREE.Mesh( geometry, material );
    mesh.position.y=0;

    scene.add(mesh);

    camera.lookAt(mesh.position);


    var spotLight = new THREE.SpotLight(0xffffff);
    spotLight.position.set(15,15,15);
    spotLight.castShadow = true;
    scene.add(spotLight);

    
}
 
function render() {

    requestAnimationFrame(render);
    mesh.rotation.y += 0.005;
    renderer.render(scene, camera);
 
}

})

		

	</script>
</head>
<body>
<div id="info"></div>
<div id="plot"></div>
	
</body>
</html>
